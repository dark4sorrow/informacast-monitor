<script>
    function refresh() {
        $.get('api/status', (s) => {
            $('#pulseOffset').text(s.offset);
            $('#pulseTotal').text(s.total); // This will now climb: 100, 200, 300...
            $('#lastSync').text(`Freshness: ${s.last_sync}`);
            
            // Re-render the table with the FULL master_list
            renderTable(s.master_list); 

            if (s.is_syncing) { $('#syncProgress').show(); } 
            else { $('#syncProgress').hide(); clearInterval(timer); }
        });
    }
</script>